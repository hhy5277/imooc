$(function(){if(/(msie 7)|(msie 8)|(msie 9)/i.test(navigator.userAgent.toLowerCase())){$("body").append('<div style="position:fixed;left:0;top:0;width:100%;height:100%;background:#000;opacity:0.35;filter:alpha(opacity:35);z-index:22222;"></div><div style="position:absolute;text-align:center;left:50%;margin-left:-300px;top:120px;width:600px;height:80px;background:#fff;border-radius:2px;line-height:80px;color:#666;z-index:22223;">当前浏览器版本较低！&nbsp;<b id="miao" style="font-size:18px;color:#999;">8</b>&nbsp;秒后网页将自动关闭，请换到现代浏览器，抱歉！</div>');var miao=8;return setInterval(function(){return miao--,0>miao?(window.close(),!1):void $("#miao").html(miao)},1e3),!1}var setFlag=function(id){$(id).addClass("current")},id="index";$(".nav li").each(function(){var iid=$(this).prop("id");return-1!=location.pathname.indexOf("suggests")?(id="about",!1):iid&&-1!=location.pathname.indexOf(iid)?(id=iid,!1):void 0}),setFlag("#"+id),$(".minnav").click(function(){$(".nav").slideToggle(230)});var postzan=!0,posttimer=null,postStep=500;$(".header .zan").click(function(){if(!postzan)return!1;postzan=!1;var s=(new Date).getTime(),e=0;$.ajax({url:"/ajaxPage.html",type:"post",data:{mainType:1,url:location.href,title:document.title},error:function(){console.log("error")},success:function(data){e=(new Date).getTime(),postStep>e-s?posttimer=setTimeout(function(){postzan=!0,clearTimeout(posttimer)},postStep-(e-s)):postzan=!0;var mes=data.mes;if(0>mes)alert("可以了，谢谢亲！");else{var c=data.count;$(".header i").html("赞（"+c+"）"),$(".header .zan").attr("title",c+"人已赞")}}})});var gettime,bodys=[],todays=[],taobao=[],alloy=[],_360=[],seared=[],TextToHtml=function(text){return String($.trim(text)).replace(/<\/?[^>]*>/g,"").replace(/&nbsp;/g,"").replace(/\t/g,"").replace(/\r/g,"").replace(/\n/g,"")},createTempHtml=function(str){var id="id"+Math.round(1e5*Math.random());$('<div class="'+id+'">'+str+"</div>").appendTo($("body"));var itext=$("."+id).html();return $("."+id).remove(),TextToHtml(itext)},renderList=function(start,arr){start=parseInt(start),$(".ing,.pageation,.item,.no").remove();var no=['<div class="no">Not Found ...</div>'],item=function(href,title,shortwords,pv,team,author){var itemTempl=['<div class="item">','<a href="/great-team/'+href+'" class="item-1" target="_blank">'+title+"</a>",'<div class="item-2">'+(createTempHtml(shortwords)||"&nbsp;")+"</div>",'<div class="h-3">'+pv+"</div>",'<div class="h-4">'+team+"</div>",'<div class="h-5">'+author+"</div>","</div>"];return itemTempl.join("")},items=[],ipages=0,onepage=30;if(arr.length<1)items=no;else{for(var i=start;start+onepage>i;i++)if(arr[i]){var team="淘宝UED";2==arr[i].team&&(team="AlloyTeam"),3==arr[i].team&&(team="腾讯ISUX"),items.push(item(arr[i].href,arr[i].title,$.trim(TextToHtml(arr[i].shortwords)),arr[i].pv,team,arr[i].author))}ipages=Math.ceil(arr.length/onepage)}if($(".h").after(items.join("")),ipages>1){var page=1,url="";start>0&&(page=Math.ceil((start-1)/30+1)),url=location.pathname+"#";var pageations=['<div class="pageation" pages="'+ipages+'">','<div class="pagecont">','<a class="prev icon icon-chevron-left"></a>','<a class="page" style="padding:0 20px;">'+page+"&nbsp;/&nbsp;"+ipages+"</a>",'<a class="next icon icon-chevron-right"></a>','<input id="ipg" type="text"/>','<a class="jump">确定</a>',"</div>","</div>"];$(".bottom").before(pageations.join("")),$(".a2ed").length&&(url+=$(".a2ed").attr("data-title")+"&"),$(".new").length&&(url+="new&"),$(".sed").length&&(url+="key="+$(".search").val()+"&"),location.href=url+"page_"+page}else{var u=location.pathname+"#";$(".a2ed").length&&(u+=$(".a2ed").attr("data-title")),$(".new").length&&(u+="new"),$(".sed").length&&(u+="key="+$(".search").val()),location.href=u}},renderOnePage=function(page,arr){var start=30*(page-1);renderList(start,arr)};$.post("/ajaxPage.html",{ajaxtype:6},function(data){var zan=data.zans;bodys=data.bodys;var izan=$(".zan-music .zan");izan.attr("title",zan+"人已赞").find("i").html("赞（"+zan+"）"),$(".counts").html(bodys.length),gettime=bodys[bodys.length-1].gottime;for(var i=0;i<bodys.length;i++)bodys[i].gottime==gettime&&todays.push(bodys[i]),2==bodys[i].team&&alloy.push(bodys[i]),3==bodys[i].team&&_360.push(bodys[i]),1==bodys[i].team&&taobao.push(bodys[i]);$(".updated").html(todays.length),$(".tb").html(taobao.length),$(".alloy").html(alloy.length),$("._360").html(_360.length),renderList(0,bodys)});var renderTeamPage=function(v){var d=$(".a2ed").attr("data-team"),team=bodys;d&&(1==d&&(team=taobao),2==d&&(team=alloy),3==d&&(team=_360)),$(".updated").hasClass("new")&&(team=todays),$(".search").hasClass("sed")&&(team=seared.distinct()),renderOnePage(v,team)};Array.prototype.distinct=function(){if(this.length>0)for(var n=0;n<this.length;n++)for(var m=n+1;m<this.length;m++)this[m]==this[n]&&this.splice(m,1);return this},$("body").on("click",".jump",function(){var v=parseInt($.trim($("#ipg").val()));if(isNaN(v)||0>=v||v>$(".pageation").attr("pages"))return $("#ipg").val(""),!1;var page=location.hash.split("_")[1];v!=page&&renderTeamPage(v)}).on("click",".prev",function(){var page=location.hash.split("_")[1],p=Math.max(page-1,1);p!=page&&renderTeamPage(p)}).on("click",".next",function(){var page=location.hash.split("_")[1],ipages=$(".pageation").attr("pages"),p=parseInt(page)+1;p>ipages&&(p=ipages),p!=page&&renderTeamPage(p)}).on("keyup","#ipg",function(event){var page=location.hash.split("_")[1],ipages=$(".pageation").attr("pages");if(13==event.which){var v=$.trim($(this).val());if(isNaN(v)||0>=v||v>ipages)return $("#ipg").val(""),!1;v!=page&&renderTeamPage(v)}}).on("click",".updated",function(){return $(".a2ed").removeClass("a2ed"),$(".sed").val("").removeClass("sed"),$(this).hasClass("new")||$(this).addClass("new"),$(".ing").lenth?!1:void renderOnePage(1,todays)}).on("click",".counts",function(){return $(".a2ed").removeClass("a2ed"),$(".new").removeClass("new"),$(".sed").val("").removeClass("sed"),$(".ing").lenth?!1:void renderList(0,bodys)}).on("click",".a-2",function(){$(".a2ed").removeClass("a2ed"),$(".new").removeClass("new"),$(".sed").val("").removeClass("sed"),$(this).addClass("a2ed"),renderTeamPage(1)}).on("keyup",".search",function(event){if(13==event.which){$(".a2ed").removeClass("a2ed"),$(".new").removeClass("new"),$(this).hasClass("sed")||$($(this).addClass("sed"));var keys=$.trim($(this).val().toLowerCase());seared=[],console.log(keys);for(var i=0;i<bodys.length;i++)(-1!=createTempHtml(bodys[i].title).toLowerCase().indexOf(keys)||-1!=createTempHtml(bodys[i].author).toLowerCase().indexOf(keys)||-1!=createTempHtml(bodys[i].teamname).toLowerCase().indexOf(keys))&&seared.push(bodys[i]);renderTeamPage(1)}}),$(window).scroll(function(){var st=$(this).scrollTop();st>=150&&$(".pageation").length?$(".banner").addClass("banfixed"):$(".banner").removeClass("banfixed")}),$(".focs .icon-weibo").click(function(){var href="http://v.t.sina.com.cn/share/share.php?url="+encodeURIComponent(location.href)+"&title="+document.title;window.open(href)}),$(".focs .icon-star").click(function(){var href="http://connect.qq.com/widget/shareqq/index.html?desc=学习分享，与君共勉！&summary=花谢花菲花满楼&title="+document.title+"&url="+encodeURIComponent(location.href);window.open(href)})});var _hmt=_hmt||[];!function(){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?1d880d533f964c2a4b703b1189239fa6";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)}(),function(){var bp=document.createElement("script");bp.src="//push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s)}();