<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>图片预加载值有序加载</title>
	<style type="text/css">
	html,body{
		height: 100%;
	}
		a{
			text-decoration: none;
		}
		.box{
			text-align: center;
		}
		.btn{
			display: inline-block;
			height: 30px;
			line-height: 30px;
			border: 1px solid #ccc;
			background-color: #fff;
			padding: 0 10px;
			margin-right: 50px;
			color: #333;
		}
		.btn:hover{
			background-color: #eee;
		}

	</style>
</head>
<body>
	<div class="box">
		<img src="http://45.34.137.202:8080/comicdata/12307/1/1.jpg" alt="pic" id="img" width="1200" />
		<p>
			<a href="javascript:;" class="btn" data-control="prev">上一页</a>
			<a href="javascript:;" class="btn" data-control="next">下一页</a>
		</p>
	</div>
<script type="text/javascript" src="d:/workspace/jquery-2.0.3/jquery-2.0.3/jquery.js"></script>
	<script type="text/javascript" src="preload.js"></script>
	<script type="text/javascript">
// 		var imgs = [

//         'http://45.34.137.202:8080/comicdata/12307/1/1.jpg',

//         'http://45.34.137.202:8080/comicdata/12307/1/2.jpg',

//         'http://45.34.137.202:8080/comicdata/12307/1/3.jpg',

//         'http://45.34.137.202:8080/comicdata/12307/1/4.jpg',        

//     ];

// 	var len = imgs.length,
// 	count = 0,
// 	index = 0;
// load ();
// 	function load () {
// 		var imgObj = new Image();

// 		$(imgObj).on('load error', function() {
// 			if(count>=len){
// 				//所有图片已经加载完成

// 			}else{

// 			}
// 			count++;
// 		});

// 		imgObj.src = imgs[count];
// 	}

// 		$('.btn').on('click', function() {
			
// 			if($(this).data('control')==='prev'){
// 				// index--;
// 				// if(index<0){
// 				// 	index = 0;
// 				// }
// 				index = Math.max(0,--index);
// 			}else{
// 				index = Math.min(len-1,++index);
// 			}
// 			document.title = (index+1)+'/'+len;
// 			$('#img').attr('src',imgs[index]);
// 		});

	var imgs = [

        'http://45.34.137.202:8080/comicdata/12307/1/1.jpg',

        'http://45.34.137.202:8080/comicdata/12307/1/2.jpg',

        'http://45.34.137.202:8080/comicdata/12307/1/3.jpg',

        'http://45.34.137.202:8080/comicdata/12307/1/4.jpg',        

    ];

	var len = imgs.length,
	count = 0,
	index = 0;
$.preload(imgs,{
	order:'ordered'
})

		$('.btn').on('click', function() {
			
			if($(this).data('control')==='prev'){
				// index--;
				// if(index<0){
				// 	index = 0;
				// }
				index = Math.max(0,--index);
			}else{
				index = Math.min(len-1,++index);
			}
			document.title = (index+1)+'/'+len;
			$('#img').attr('src',imgs[index]);
		});
	</script>
</body>
</html>