var myEditor;$(function(){var a={animationTime:400,closeTab:function(a){$(".open-tab").removeClass("active"),$("body").removeClass("meny-active"),a||(window.location.href=$(".show-code").length?"#code":"#full")},openCode:function(){$("body").addClass("show-code"),$("#code").attr("href","#full"),$(".button.prev, .button.next").each(function(){var a=$(this).attr("href");a=a.replace("#full",""),a+="#code",$(this).attr("href",a)})},closeCode:function(){$("#code").attr("href","#code").removeClass("active"),$("body").removeClass("show-code"),$(".button.prev, .button.next").each(function(){var a=$(this).attr("href");a=a.replace("#code",""),a+="#full",$(this).attr("href",a)})},init:function(){var a=this;"onhashchange"in window?($(window).on("hashchange",function(){var b=window.location.hash;if(a.closeTab(!0),$("#left-tab .tab").hide(),b)switch($(b).addClass("active"),$(b+"-tab").show(),$(b).hasClass("open-tab")&&$("body").addClass("meny-active"),b){case"#comments":loadComments();break;case"#code":a.openCode();break;case"#full":a.closeCode()}else a.closeCode()}),$(window).trigger("hashchange")):alert("Sorry, you need a modern browser that supports onhashchange. Almost nothing will work on ecsspert.com without this"),$("body").keydown(function(a){37==a.which?window.location=$(".button.prev").attr("href"):39==a.which&&(window.location=$(".button.next").attr("href"))}),$("#window").click(function(){$(".meny-active").length&&a.closeTab()}),$(".dropdown").on("touchstart",function(){$(this).toggleClass("hover")})}};a.init()});var ecsspert={editors:{},options:{cursorScrollMargin:5,indentUnit:4,lineNumbers:!0,showCursorWhenSelecting:!0,tabSize:4,viewportMargin:500},init:function(a){var b=this;b.postURI=a,$("#editors").keydown(function(a){a.stopPropagation()}),$("#editors textarea").each(function(){switch(mode=$(this).attr("data-mode")){case"css":CodeMirror.commands.autocomplete=function(a){mode=a.doc.modeOption.replace("text/",""),CodeMirror.showHint(a,CodeMirror.hint[mode])};var a=$.extend(b.options,{autofocus:!0,mode:"text/css",autoCloseBrackets:!0,extraKeys:{"Ctrl-Space":"autocomplete"}});b.editors[mode]=CodeMirror.fromTextArea($(this)[0],a);break;case"html":var a=$.extend(b.options,{autofocus:!1,mode:"text/html",autoCloseTags:!0,extraKeys:{"Ctrl-Space":"autocomplete"}});b.editors[mode]=CodeMirror.fromTextArea($(this)[0],a)}b.editors[mode].on("change",b.livePreview)}),b.livePreview(),$(window).resize()},livePreview:function(){var a={uri:ecsspert.postURI};for(editor in ecsspert.editors)a[editor]=ecsspert.editors[editor].getValue();localStorage.setItem("ecsspertCode",JSON.stringify(a))}};